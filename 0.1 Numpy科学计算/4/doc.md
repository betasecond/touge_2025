第4关：ufunc
100
学习内容
参考答案
记录
评论
任务描述
相关知识
常用的一元通用函数
常用的二元通用函数
使用 ufuncs 的优势
编程实例
编程要求
测试说明
任务描述
本关任务：根据任务要求使用 Numpy 库自带的通用函数对数组进行计算。

相关知识
NumPy 中的 ufunc 对象也称为 ufunc 函数，它包含了对数组进行处理的通用函数。通用函数（ufunc）是针对 ndarray 数组对象执行元素级运算的函数，即通用函数会对数组中的每一个元素值作用后产生新的元素值，并返回新的元素值组成的数组，因此，通用函数（ufunc）都是以 NumPy 数组作为输出的。

通用函数（ufunc）的分类：

按照通用函数（ufunc）所接收的数组参数个数来划分，接收一个数组参数的称为一元通用函数，而接收两个数组参数的称为二元通用函数；
按照通用函数（ufunc）的运算功能划分，常用的通用函数（ufunc）运算有四则运算、比较运算和逻辑运算等。通用函数（ufunc）支持全部的四则运算，并且保留习惯的运算符，与数值运算使用方法相同，但要注意操作的对象是数组。
常用的一元通用函数
函数	说明
ceil()	计算各元素的 ceiling 值，即大于等于该值的最小整数
floor()	计算各元素的 floor 值,即小于等于该值的最大整数
rint()	将各元素的值四舍五入到最接近的整数，保留 dtype
modf()	将数组的小数和整数部分以两个独立数组的形式返回
isnan()	返回一个"哪些值是 NaN （Not a Numbed）"的布尔型数组
isfinite、isinf()	分别返回一个表不"哪些元素是有穷的（非inf,非NaN ）”或“哪些元素是无穷” 的布尔型数组
abs()、fabs()	计算整数、浮点数或复数的绝对值，对于非复数值可以使用更快的 fabs
sqrt()	计算各元素的平方根，相当于 arr**0.5
square()	计算各元素的平方，相当于 arr**2
exp()	计算各元素的指数 $e^x$
log()、Ioh10()、Icg2()、 log1p()	分别为自然对数（底数为 e )，底数为 10，底数为2， log(1+x）
sing()	计算各元素的正负号，1 (正数)，0 (零)，-1 (负数）
cos()、cosh()、sin()、 sinh()、tan()、arccos()、arccosh()、arcsin()、 arcsinh()、arctan()、arctanh()	三角函数和反三角函数
logical_not()	计算各元素取反，相当于 -arr
常用的二元通用函数
函数	等价运算符	说明
add()	+	将数组中对应元素相加
subtract()	-	从第一数组中减去第二数组中的元素
multipIy()	*	将数组中对应元素相乘（数量积）
dot()		数组中对应元素相乘的累加和（矢量积）
divide()、floor_divide()	/、//	将数组中对应元素相除或向下整除
mod()、 remainder()、fmod()	%	元素级的求模计算（除法的余数）；mod与remainder的功能完全一致；fmod处理负数的方式与remainder、mod和％不同， 所得余数的正负由被除数决走，与除数的正负无关
maximum()、fmax()		元素级的最大值计算，fmax 将忽略 NaN
minimum()、fmin()		元素级的最小值计算，fmin 将忽略 NaN
power()	**	对第一个数组中的元素 A，根据第二个数组中的相应元素 B，计算AB
copysing()		将第二个数组中的值的符号复制给第一个数组中的值
equal()、not_equal()、 greater()、greater_equal()、less()、less_equal()	==、!=、> 、>=、<、<=	执行元素级的比较运算，最终产生布尔型数组
logical_and()、logical_or()、logical xor()	&、|、^	执行元素级的真值逻辑运算，返回布尔型值
注意：在二元通用函数中，当第二个参数为标量时或者维度不一致时，将进行广播（Broadcast）运算。

更多基本通用函数可以在本页面找到： >>点击传送<<

使用 ufuncs 的优势
ufunc 用于在 NumPy 中实现矢量化，与迭代元素相比，性能大幅提升。

提供广播和其他方法，对计算非常有帮助。

将迭代语句转换为基于向量的操作，在 CPU 层级中已针对此类操作进行了优化，因此速度更快。

编程实例
以如下 NumPy 数组 A 为例，使用 ufuncs 函数对数组 A 进行计算：

A = np.random.randint(0, 10, (5, 6)) # 随机初始化一个5行6列的整数矩阵A
'''
A =
array([[7, 2, 6, 8, 8, 8],
[5, 7, 2, 5, 6, 7],
[9, 2, 8, 0, 7, 9],
[6, 0, 6, 1, 9, 1],
[4, 2, 6, 7, 6, 2]])
'''
对数组 A 的元素开根号：

B = np.sqrt(A)
'''
B =
array([[2.64575131, 1.41421356, 2.44948974, 2.82842712, 2.82842712, 2.82842712],
[2.23606798, 2.64575131, 1.41421356, 2.23606798, 2.44948974, 2.64575131],
[3.        , 1.41421356, 2.82842712, 0.        , 2.64575131, 3.        ],
[2.44948974, 0.        , 2.44948974, 1.        , 3.        , 1.        ],
[2.        , 1.41421356, 2.44948974, 2.64575131, 2.44948974, 1.41421356]])
'''
将数组 A 的平方根乘浮点数分解成整数和小数部分：

B, C = np.modf(np.sqrt(A))
'''
B =
array([[0.64575131, 0.41421356, 0.44948974, 0.82842712, 0.82842712, 0.82842712],
[0.23606798, 0.64575131, 0.41421356, 0.23606798, 0.44948974, 0.64575131],
[0.        , 0.41421356, 0.82842712, 0.        , 0.64575131, 0.        ],
[0.44948974, 0.        , 0.44948974, 0.        , 0.        , 0.        ],
[0.        , 0.41421356, 0.44948974, 0.64575131, 0.44948974, 0.41421356]]),
C =
array([[2., 1., 2., 2., 2., 2.],
[2., 2., 1., 2., 2., 2.],
[3., 1., 2., 0., 2., 3.],
[2., 0., 2., 1., 3., 1.],
[2., 1., 2., 2., 2., 1.]])
'''
将数组 A 与标量 2 相加：

B = np.add(A,2)
'''
B =
array([[ 9,  4,  8, 10, 10, 10],
[ 7,  9,  4,  7,  8,  9],
[11,  4, 10,  2,  9, 11],
[ 8,  2,  8,  3, 11,  3],
[ 6,  4,  8,  9,  8,  4]])
'''
编程要求
根据任务提示，在右侧编辑器 Begin-End 部分补充代码。

任务要求：

计算矩阵 A 的平方根并与标量 2 相加；
将矩阵 A 开根号后的小数部分与原矩阵 A 相加；
使用通用函数 numpy.dot() 计算矩阵 A 与矩阵 A 转置的矢量积；
测试说明
平台会对你编写的代码进行测试：

测试输入：

[[7, 2, 6, 8, 8, 8],[5, 7, 2, 5, 6, 7],[9, 2, 8, 0, 7, 9],[6, 0, 6, 1, 9, 1],[4, 2, 6, 7, 6, 2]]
预期输出：

task1输出：
[[4.64575131 3.41421356 4.44948974 4.82842712 4.82842712 4.82842712]
[4.23606798 4.64575131 3.41421356 4.23606798 4.44948974 4.64575131]
[5.         3.41421356 4.82842712 2.         4.64575131 5.        ]
[4.44948974 2.         4.44948974 3.         5.         3.        ]
[4.         3.41421356 4.44948974 4.64575131 4.44948974 3.41421356]]
task2输出：
[[7.64575131 2.41421356 6.44948974 8.82842712 8.82842712 8.82842712]
[5.23606798 7.64575131 2.41421356 5.23606798 6.44948974 7.64575131]
[9.         2.41421356 8.82842712 0.         7.64575131 9.        ]
[6.44948974 0.         6.44948974 1.         9.         1.        ]
[4.         2.41421356 6.44948974 7.64575131 6.44948974 2.41421356]]
task3输出：
[[281 205 243 166 188]
[205 188 180 108 131]
[243 180 279 174 148]
[166 108 174 155 123]
[188 131 148 123 145]]
开始你的任务吧，祝你成功！